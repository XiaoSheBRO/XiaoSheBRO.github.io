import{g as K,u as W,n as X,p as Z,q as ee,t as se,s as le,j as L,h as A,v as e,x as ae,y as re,z as te,R as j,A as oe,B as ie,C as ce,D as ne,E as ue,F as E,G as I,H as de,I as me,J as he,l as ve,L as ye,K as pe,M as Se,N as ge,O,P as fe,Q as x}from"./app-Bw-jT3D9.js";const He=["/PlayAround.html","/","/TODO.html","/docs/","/docs/Archived/Ajax.html","/docs/Archived/Engineering.html","/docs/Archived/H5C3.html","/docs/Archived/JS.html","/docs/Archived/Node.js.html","/docs/Archived/Projects.html","/docs/Archived/Scss.html","/docs/Archived/Vue2.x.html","/docs/Archived/Vue3.x.html","/docs/demo/CSS-1-Carousel.html","/docs/demo/CSS-2-DiyRadio.html","/docs/demo/CSS-3-ScrollBarStyle.html","/docs/demo/CSS-4-Font.html","/docs/demo/HTML-1-Table.html","/docs/demo/JS-1-VariableSwitch.html","/docs/demo/JS-10-ArrayCount.html","/docs/demo/JS-11-Is-Prime.html","/docs/demo/JS-12-FunctionExample.html","/docs/demo/JS-13-CallbackFunction.html","/docs/demo/JS-14-CallStack.html","/docs/demo/JS-2-TemperatureConverter.html","/docs/demo/JS-3-InterestCalculator.html","/docs/demo/JS-4-JudgeLeapYear.html","/docs/demo/JS-5-OperatorPriority.html","/docs/demo/JS-6-LogicalOperator.html","/docs/demo/JS-7-FibonacciArray.html","/docs/demo/JS-8-TwoDimensionalArray.html","/docs/demo/JS-9-SortArray.html","/docs/demo/SVG-1-Demo.html","/docs/resources/yupi.html","/docs/journey/Coding.html","/docs/journey/","/docs/learning/algorithm/Starter.html","/docs/learning/tools/Git.html","/docs/learning/frontend/Browser.html","/docs/learning/frontend/CSS.html","/docs/learning/frontend/HTML.html","/docs/learning/frontend/JavaScript.html","/docs/learning/frontend/SVG.html","/404.html","/docs/Archived/","/docs/demo/","/docs/resources/","/docs/learning/algorithm/","/docs/learning/","/docs/learning/tools/","/docs/learning/frontend/"],Ce="SLIMSEARCH_QUERY_HISTORY",S=O(Ce,[]),Ae=()=>{const{queryHistoryCount:r}=x;return{enabled:r>0,queryHistories:S,addQueryHistory:c=>{S.value=Array.from(new Set([c,...S.value.slice(0,r-1)]))},removeQueryHistory:c=>{S.value=[...S.value.slice(0,c),...S.value.slice(c+1)]}}},q=r=>He[r.id]+("anchor"in r?`#${r.anchor}`:""),xe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:$}=x,g=O(xe,[]),be=()=>({enabled:$>0,resultHistories:g,addResultHistory:i=>{{const c={link:q(i),display:i.display};"header"in i&&(c.header=i.header),g.value=[c,...g.value.slice(0,$-1)]}},removeResultHistory:i=>{g.value=[...g.value.slice(0,i),...g.value.slice(i+1)]}}),ke=r=>{const{page:i,routeLocale:c}=de(),b=me(),t=L(0),f=A(()=>t.value>0),d=he([]);return ve(()=>{const{search:k,terminate:v}=ye(),H=Se(y=>{const{resultsFilter:w=a=>a,querySplitter:p,suggestionsFilter:D,...o}=b.value;y?(t.value+=1,k(y,c.value,o).then(a=>w(a,y,c.value,i.value)).then(a=>{t.value-=1,d.value=a}).catch(a=>{console.warn(a),t.value-=1,t.value||(d.value=[])})):d.value=[]},x.searchDelay-x.suggestDelay,{maxWait:5e3});pe([r,c],([y])=>H(y.join(" "))),ge(()=>{v()})}),{isSearching:f,results:d}};var Re=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:i}){const c=W(),b=X(),t=Z(ee),{addQueryHistory:f,queryHistories:d,removeQueryHistory:k}=Ae(),{resultHistories:v,addResultHistory:H,removeResultHistory:y}=be(),w=se(r,"queries"),{results:p,isSearching:D}=ke(w),o=le({isQuery:!0,index:0}),a=L(0),m=L(0),F=A(()=>d.value.length>0||v.value.length>0),R=A(()=>p.value.length>0),J=A(()=>p.value[a.value]||null),P=()=>{const{isQuery:s,index:l}=o;l===0?(o.isQuery=!s,o.index=s?v.value.length-1:d.value.length-1):o.index=l-1},M=()=>{const{isQuery:s,index:l}=o;l===(s?d.value.length-1:v.value.length-1)?(o.isQuery=!s,o.index=0):o.index=l+1},V=()=>{a.value=a.value>0?a.value-1:p.value.length-1,m.value=J.value.contents.length-1},B=()=>{a.value=a.value<p.value.length-1?a.value+1:0,m.value=0},G=()=>{m.value<J.value.contents.length-1?m.value+=1:B()},U=()=>{m.value>0?m.value-=1:V()},Q=s=>s.map(l=>fe(l)?l:e(l[0],l[1])),Y=s=>{if(s.type==="customField"){const l=ne[s.index]||"$content",[h,n=""]=ue(l)?l[b.value].split("$content"):l.split("$content");return s.display.map(u=>e("div",Q([h,...u,n])))}return s.display.map(l=>e("div",Q(l)))},C=()=>{a.value=0,m.value=0,i("updateQuery",""),i("close")},_=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},t.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},d.value.map((s,l)=>{const h=o.isQuery&&o.index===l;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{i("updateQuery",s)}},e("div",[e(E,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},s),e("button",{type:"button",class:"slimsearch-remove-icon",title:t.value.remove,"aria-label":t.value.remove,innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),k(l)}})]))}))])),N=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},t.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((s,l)=>{const h=!o.isQuery&&o.index===l;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h},e(j,{to:s.link,onClick:()=>{C()}},()=>[e(E,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[s.header?e("div",{class:"slimsearch-record-content-header"},s.header):null,e("div",s.display.map(n=>Q(n)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:t.value.remove,"aria-label":t.value.remove,innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),y(l)}})]))}))]));return ae("keydown",s=>{if(r.isFocusing){if(R.value){if(s.key==="ArrowUp")U();else if(s.key==="ArrowDown")G();else if(s.key==="Enter"){const l=J.value.contents[m.value];f(r.queries.join(" ")),H(l),c.push(q(l)),C()}}else if(s.key==="ArrowUp")P();else if(s.key==="ArrowDown")M();else if(s.key==="Enter"){const{index:l}=o;o.isQuery?(s.preventDefault(),i("updateQuery",d.value[l])):(c.push(v.value[l].link),C())}}}),re([a,m],()=>{var s;(s=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||s.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:r.queries.length?!R.value:!F.value}]},r.queries.length?D.value?e(te,{hint:t.value.searching}):R.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},p.value.map(({title:s,contents:l},h)=>{const n=a.value===h;return e("div",{class:["slimsearch-record",{active:n}],role:"group","aria-selected":n},[e("div",{class:"slimsearch-record-title"},s||t.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},l.map((u,z)=>{const T=n&&m.value===z;return e("li",{class:["slimsearch-record-matches",{active:T}],role:"option","aria-selected":T},e(j,{to:q(u),onClick:()=>{f(r.queries.join(" ")),H(u),C()}},()=>[u.type==="text"?null:e(u.type==="title"?oe:u.type==="heading"?ie:ce,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[u.type==="text"&&u.header?e("div",{class:"slimsearch-record-content-header"},u.header):null,e("div",Y(u))])]))}))])})):t.value.emptyResult:F.value?[_(),N()]:t.value.emptyHistory)}});export{Re as default};
