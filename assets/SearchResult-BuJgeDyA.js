import{g as K,u as W,n as X,p as Z,q as ee,t as se,s as le,j as D,h as x,v as e,x as ae,y as re,z as te,R as E,A as oe,B as ne,C as ie,D as ce,E as ue,F,G as O,H as de,I as me,J as he,l as ve,L as ye,K as pe,M as ge,N as Se,O as I,P as fe,Q as R}from"./app-CrvVDNwZ.js";const He=["/PlayAround.html","/","/TODO.html","/docs/","/docs/resources/yupi.html","/docs/demo/CSS-1-Carousel.html","/docs/demo/CSS-2-DiyRadio.html","/docs/demo/CSS-3-ScrollBarStyle.html","/docs/demo/CSS-4-Font.html","/docs/demo/HTML-1-Table.html","/docs/demo/JS-1-VariableSwitch.html","/docs/demo/JS-2-TemperatureConverter.html","/docs/demo/JS-3-InterestCalculator.html","/docs/demo/JS-4-JudgeLeapYear.html","/docs/demo/JS-5-OperatorPriority.html","/docs/demo/JS-6-LogicalOperator.html","/docs/demo/SVG-1-Demo.html","/docs/journey/Coding.html","/docs/journey/","/docs/learning/Archive.html","/docs/learning/DevOps.html","/docs/learning/Projects.html","/docs/learning/algorithm/Starter.html","/docs/learning/frontend/Ajax.html","/docs/learning/frontend/Browser.html","/docs/learning/frontend/CSS.html","/docs/learning/frontend/Engineering.html","/docs/learning/frontend/H5C3.html","/docs/learning/frontend/HTML.html","/docs/learning/frontend/JS.html","/docs/learning/frontend/JavaScript.html","/docs/learning/frontend/Node.js.html","/docs/learning/frontend/SVG.html","/docs/learning/frontend/Scss.html","/docs/learning/frontend/Vue2.x.html","/docs/learning/frontend/Vue3.x.html","/docs/learning/tools/Git.html","/404.html","/docs/resources/","/docs/demo/","/docs/learning/","/docs/learning/algorithm/","/docs/learning/frontend/","/docs/learning/tools/"],Ce="SLIMSEARCH_QUERY_HISTORY",g=I(Ce,[]),xe=()=>{const{queryHistoryCount:r}=R;return{enabled:r>0,queryHistories:g,addQueryHistory:i=>{g.value=Array.from(new Set([i,...g.value.slice(0,r-1)]))},removeQueryHistory:i=>{g.value=[...g.value.slice(0,i),...g.value.slice(i+1)]}}},A=r=>He[r.id]+("anchor"in r?`#${r.anchor}`:""),Re="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:$}=R,S=I(Re,[]),be=()=>({enabled:$>0,resultHistories:S,addResultHistory:n=>{{const i={link:A(n),display:n.display};"header"in n&&(i.header=n.header),S.value=[i,...S.value.slice(0,$-1)]}},removeResultHistory:n=>{S.value=[...S.value.slice(0,n),...S.value.slice(n+1)]}}),ke=r=>{const{page:n,routeLocale:i}=de(),b=me(),t=D(0),f=x(()=>t.value>0),d=he([]);return ve(()=>{const{search:k,terminate:v}=ye(),H=ge(y=>{const{resultsFilter:w=a=>a,querySplitter:p,suggestionsFilter:T,...o}=b.value;y?(t.value+=1,k(y,i.value,o).then(a=>w(a,y,i.value,n.value)).then(a=>{t.value-=1,d.value=a}).catch(a=>{console.warn(a),t.value-=1,t.value||(d.value=[])})):d.value=[]},R.searchDelay-R.suggestDelay,{maxWait:5e3});pe([r,i],([y])=>H(y.join(" "))),Se(()=>{v()})}),{isSearching:f,results:d}};var Qe=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:n}){const i=W(),b=X(),t=Z(ee),{addQueryHistory:f,queryHistories:d,removeQueryHistory:k}=xe(),{resultHistories:v,addResultHistory:H,removeResultHistory:y}=be(),w=se(r,"queries"),{results:p,isSearching:T}=ke(w),o=le({isQuery:!0,index:0}),a=D(0),m=D(0),j=x(()=>d.value.length>0||v.value.length>0),Q=x(()=>p.value.length>0),L=x(()=>p.value[a.value]||null),M=()=>{const{isQuery:s,index:l}=o;l===0?(o.isQuery=!s,o.index=s?v.value.length-1:d.value.length-1):o.index=l-1},P=()=>{const{isQuery:s,index:l}=o;l===(s?d.value.length-1:v.value.length-1)?(o.isQuery=!s,o.index=0):o.index=l+1},V=()=>{a.value=a.value>0?a.value-1:p.value.length-1,m.value=L.value.contents.length-1},B=()=>{a.value=a.value<p.value.length-1?a.value+1:0,m.value=0},G=()=>{m.value<L.value.contents.length-1?m.value+=1:B()},U=()=>{m.value>0?m.value-=1:V()},q=s=>s.map(l=>fe(l)?l:e(l[0],l[1])),Y=s=>{if(s.type==="customField"){const l=ce[s.index]||"$content",[h,c=""]=ue(l)?l[b.value].split("$content"):l.split("$content");return s.display.map(u=>e("div",q([h,...u,c])))}return s.display.map(l=>e("div",q(l)))},C=()=>{a.value=0,m.value=0,n("updateQuery",""),n("close")},_=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},t.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},d.value.map((s,l)=>{const h=o.isQuery&&o.index===l;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{n("updateQuery",s)}},e("div",[e(F,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},s),e("button",{type:"button",class:"slimsearch-remove-icon",title:t.value.remove,"aria-label":t.value.remove,innerHTML:O,onClick:c=>{c.preventDefault(),c.stopPropagation(),k(l)}})]))}))])),N=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},t.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((s,l)=>{const h=!o.isQuery&&o.index===l;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h},e(E,{to:s.link,onClick:()=>{C()}},()=>[e(F,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[s.header?e("div",{class:"slimsearch-record-content-header"},s.header):null,e("div",s.display.map(c=>q(c)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:t.value.remove,"aria-label":t.value.remove,innerHTML:O,onClick:c=>{c.preventDefault(),c.stopPropagation(),y(l)}})]))}))]));return ae("keydown",s=>{if(r.isFocusing){if(Q.value){if(s.key==="ArrowUp")U();else if(s.key==="ArrowDown")G();else if(s.key==="Enter"){const l=L.value.contents[m.value];f(r.queries.join(" ")),H(l),i.push(A(l)),C()}}else if(s.key==="ArrowUp")M();else if(s.key==="ArrowDown")P();else if(s.key==="Enter"){const{index:l}=o;o.isQuery?(s.preventDefault(),n("updateQuery",d.value[l])):(i.push(v.value[l].link),C())}}}),re([a,m],()=>{var s;(s=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||s.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:r.queries.length?!Q.value:!j.value}]},r.queries.length?T.value?e(te,{hint:t.value.searching}):Q.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},p.value.map(({title:s,contents:l},h)=>{const c=a.value===h;return e("div",{class:["slimsearch-record",{active:c}],role:"group","aria-selected":c},[e("div",{class:"slimsearch-record-title"},s||t.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},l.map((u,z)=>{const J=c&&m.value===z;return e("li",{class:["slimsearch-record-matches",{active:J}],role:"option","aria-selected":J},e(E,{to:A(u),onClick:()=>{f(r.queries.join(" ")),H(u),C()}},()=>[u.type==="text"?null:e(u.type==="title"?oe:u.type==="heading"?ne:ie,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[u.type==="text"&&u.header?e("div",{class:"slimsearch-record-content-header"},u.header):null,e("div",Y(u))])]))}))])})):t.value.emptyResult:j.value?[_(),N()]:t.value.emptyHistory)}});export{Qe as default};
